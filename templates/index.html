<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Sebastian Cunningham Portfolio</title>

    {# Fonts #}
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=TASA+Explorer:wght@400..800&display=swap"
      rel="stylesheet"
    />

    {# CSS #}
    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='css/styles.css')}}"
    />
    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='css/loading.css')}}"
    />
    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='css/universe.css')}}"
    />
  </head>

  {# Body #}
  <body>
    {# Loading #}
    <div id="loading-screen">
      <div class="spinner-wrapper" id="spinner-wrapper">
        <img
          src="{{ url_for('static', filename='images/alien.png')}}"
          alt="Loading..."
          width="100"
          height="100"
          class="spinner"
        />
      </div>
      <h1 class="bold">Loading the universe<span id="loading-dots"></span></h1>
    </div>

    {# Universe #}
    <div id="universe-container">
      <canvas id="space-map"></canvas>

      <div id="controls">
        <button id="reset-view" title="Reset View">üè†</button>
        <div id="zoom-controls">
          <button id="zoom-in" title="Zoom In">+</button
          ><button id="zoom-out" title="Zoom Out">-</button>
        </div>
        <button id="view-info" title="View Info">‚ÑπÔ∏è</button>
      </div>

      <div id="info-panel" class="hidden">
        <button id="close-panel">x</button>
        <h2 id="panel-name"></h2>
        <div id="panel-container"></div>
      </div>
    </div>

    {# Toasts #}
    <div id="toast">
      <span id="toast-text">Hello!</span>
    </div>
  </body>

  {# Scripts #} {# Imports #}
  <script src="{{ url_for('static', filename='js/panel.js') }}"></script>
  <script src="{{ url_for('static', filename='js/main.js') }}"></script>
  <script src="{{ url_for('static', filename='js/space-engine.js') }}"></script>
  <script src="{{ url_for('static', filename='js/sound-engine.js') }}"></script>
  <script src="{{ url_for('static', filename='js/toasts.js') }}"></script>

  {# Paths #}
  <script>
    // Images
    const planetImagePaths = {
      earth: "{{ url_for('static', filename='images/Earth.png') }}",
      blue: "{{ url_for('static', filename='images/Blue.png') }}",
      orange: "{{ url_for('static', filename='images/Orange.png') }}",
      pink: "{{ url_for('static', filename='images/Pink.png') }}",
      white: "{{ url_for('static', filename='images/White.png') }}",
      green: "{{ url_for('static', filename='images/Green.png') }}",
      purple: "{{ url_for('static', filename='images/Purple.png') }}",
      red: "{{ url_for('static', filename='images/Red.png') }}",
    };

    const galaxyImagePaths = {
      blue: "{{ url_for('static', filename='images/GalaxyBlue.png') }}",
      green: "{{ url_for('static', filename='images/GalaxyGreen.png') }}",
      red: "{{ url_for('static', filename='images/GalaxyRed.png') }}",
      white: "{{ url_for('static', filename='images/GalaxyWhite.png') }}",
      cyan: "{{ url_for('static', filename='images/GalaxyCyan.png') }}",
    };

    const githubImagePath =
      "{{ url_for('static', filename='images/github.png') }}";
    const clickSoundPath =
      "{{ url_for('static', filename='audios/click.mp3')}}";
    const ambienceSoundPath =
      "{{ url_for('static', filename='audios/ambience.mp3')}}";
    const transitionSoundPath =
      "{{ url_for('static', filename='audios/transition.mp3')}}";
    const ufoSoundPath = "{{ url_for('static', filename='audios/ufo.mp3')}}";

    const soundEngine = new SoundEngine();
  </script>

  {# Loading #}
  <script>
    // Spinner Click
    const sound = document.getElementById("spinner-click-sound");
    document
      .getElementById("spinner-wrapper")
      .addEventListener("click", function () {
        this.classList.add("clicked");
        soundEngine.play("click");
        setTimeout(() => this.classList.remove("clicked"), 200);
      });

    // Loading Elipsises
    const loadingDots = document.getElementById("loading-dots");
    let dots = 0;
    setInterval(() => {
      dots = (dots + 1) % 4;
      loadingDots.textContent = ".".repeat(dots);
    }, 500);

    let ambiencePlaying = false;

    document.addEventListener("click", function () {
      if (!ambiencePlaying) {
        soundEngine.playLoop("ambience");
        ambiencePlaying = true;
      }
    });
  </script>
</html>
